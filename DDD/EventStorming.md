# 事件风暴
事件风暴（Event Stroming）的引入对DDD而言是一次重要的发展，其提供了一种探索业务复杂性的套路。通过实施事件风暴有助于帮助我们发现有界上下文、上下文映射和领域的划分，而所涉及到的领域设计战略模式是开展DDD的基础和难点，因此通过熟练实施事件风暴套路进而掌握DDD是一个可行的途径。

## 1 什么是事件风暴？
事件风暴是Alberto Brandoliniti提出的一种快速、轻量级且未得到充分认可的群体建模技术（此定义来源Google产品技术经理Steven A. Lowe，原文来自：https://techbeacon.com/devops/introduction-event-storming-easy-way-achieve-domain-driven-design ）。该定义其实有点太概念化不太好理解，更便于理解的说法是：事件风暴是以工作坊的形式围绕领域事件多人展开头脑风暴。

### 1.1 事件风暴围绕领域事件展开，其本质原因何在
维根斯坦是20世纪颇具影响力的哲学家之一，其著作《逻辑哲学论》表达了：“世界是事实的总和，而非事物的总和”的理论。在他看来是世界是由发生着的事实组成的，这里的事实包含了事物、事物的行为以及事物之间的动态关系。因此用人类语言描述所见所闻时，除了关心主语是什么之外，更需要关系谓语是什么。谓语表达的是动作与行为，其是组成事实的一部分。

说完哲学理论，接下来得说下领域事件。那么领域事件是什么？这里可以理解为领域专家对其业务领域感兴趣的、发生的事情与情况，也可以不准确的简单理解为业务流程中发生的行为动作。例如电商中的商品已上架、用户已下单等等。在DDD建模领域，使用“事件”代表“事实”，表达对象之间的关系，同理关系一定来自两个或多个对象。至此可以通过领域事件得到事实（事物+事物行为+事物间关系），事实集合能组成世界，那么通过分析领域事件也可以还原复杂的业务场景。

领域事件表达了至少两个对象之间的关系，那么当领域事件发生在有界上下文是能够帮助找出有界上下文和上下文映射（即有界上下文之间的关系），发生在聚合根维度上能帮助划分出聚合根。通过分析领域事件已经帮助解决了DDD中有界上下文和聚合根划分的难题。以上是事件风暴方法论的背后哲学理论依据。

### 1.2 事件风暴与其它方法论的不同处

- 首先从数据建模开始，那么人们的思考和对话将很快转移到范式、事物和其他非业务领域相关的事情。
- 首先从行为建模开始，当人们将行为分解为任务并将其链接到流程时，会分心或不知道如何下手。

领域事件是数据和行为的结合，其表示的是领域事实，这些事件仅在基础业务发生更改时才会发生明显变化，因此领域事件时DDD建模中更稳定和更具弹性的脚手架。

## 2 事件风暴建模法
找一个会议室，会议室有空旷的白板，准备好各种颜色的便签。参与会议的运营人员、产品经理、开发人员、测试人员、[领域专家]、[交互视觉人员]都到常，且建议尽量都站着、手里都便签纸。从领域事件开始探索领域，按照时间线向前和向后发现领域事件，探索领域事件的源头。中间涉及到命令、用户、事件需要用不同颜色的便签。讨论的粒度可以按：子域->有界上下文.

### 领域事件
#### 领域事件命名
事件代表过去发生的事件、领域事件在命名需要遵循如下规则：
- 必须使用过去式，表示已经发生的事情.如EmployeeJoined-员工入职，SampleShipped-样品已出货
- 因为领域事件表示与领域相关的事件、命名必须代表深刻的业务领域含义。不能使用CRUDish缺乏深度理解的命名方式，如somethingChanged,somethingUpdated,somethingDeleted; 不能使用通用的事物或交易术语，如somethingRollbacked,somethingCancled.这些错误的方式都是没有使用领域中的通用术语，会导致业务概念被隐藏和忽略。

推荐命名格式：业务名词+动词过去式

### 命令

